---
import Layout from "../layouts/Layout.astro";
import Header from "../components/Header-internal.astro";
import Footer from "../components/Footer.astro";
import GalleryGrid from "../components/GalleryGrid.astro";
import { getAllGalleryItems } from "../utils/gallery-loader.ts";
import "../styles/global.css";

// Load gallery data using new JSON-based system
const galleryItems = await getAllGalleryItems();

// Create serializable data for client-side JavaScript
const galleryDataForJS = galleryItems.map(item => ({
  id: item.id,
  title: item.title,
  description: item.description,
  alt: item.images.large.alt,
  thumbnailSrc: `/gallery/${item.images.thumbnail.src}`,
  largeSrc: `/gallery/${item.images.large.src}`
}));
---

<Layout title="Restaurant | Foresters Arms Coverdale" description="Experience exceptional dining at The Foresters Arms restaurant in Carlton-in-Coverdale. Enjoy locally sourced Yorkshire cuisine, legendary ales, and warm hospitality in our historic Grade II listed pub.">
  <Header />

  <main>
    <!-- Restaurant Hero Section -->
    <section
      class="relative flex items-center justify-center min-h-screen pt-20 overflow-hidden bg-cover bg-center bg-no-repeat"
      style="background-image: url('/restaurant-header.webp');"
    >
      <div class="absolute inset-0 bg-black/20"></div>
      <div class="container relative z-10 px-6 mx-auto text-center">
        <h1
          class="mb-6 text-5xl font-black md:text-7xl font-display gold-accent animate-fadeInUp"
        >
          Exceptional Dining
        </h1>
        <p
          class="max-w-3xl mx-auto mb-10 text-xl text-gray-300 md:text-2xl animate-fadeInUp delay-1"
        >
          Savor the finest Yorkshire flavors in our historic setting, where every meal tells a story of local tradition and culinary excellence.
        </p>
        <a
          href="#menu"
          class="px-8 py-3 text-lg font-semibold text-black transition-all duration-300 transform rounded-lg bg-gold-accent hover-gold-accent hover:scale-105 animate-fadeInUp delay-2 focus:outline-none focus:ring-2 focus:ring-amber-300 focus:ring-opacity-50"
        >
          Explore Our Menu
        </a>
      </div>
    </section>

    <!-- Restaurant Philosophy Section -->
    <section class="py-20 bg-gray-900 md:py-32">
      <div class="container px-6 mx-auto">
        <div class="grid items-center gap-12 md:grid-cols-2">
          <div class="animate-fadeInUp">
            <h2 class="mb-6 text-4xl md:text-5xl font-display gold-accent">
              Our Culinary Philosophy
            </h2>
            <p class="mb-4 leading-relaxed text-gray-400">
              At The Foresters Arms, we believe in celebrating the rich culinary heritage of Yorkshire while embracing modern techniques and presentation. Our kitchen sources the finest local ingredients from trusted suppliers across the Dales.
            </p>
            <p class="mb-4 leading-relaxed text-gray-400">
              From hearty traditional dishes that warm the soul to contemporary creations that surprise and delight, every plate tells the story of our beautiful Yorkshire landscape and the passionate people who call it home.
            </p>
            <p class="leading-relaxed text-gray-400">
              Whether you're seeking a satisfying meal after a day exploring the Dales or celebrating a special occasion, our restaurant provides the perfect setting for memorable dining experiences.
            </p>
          </div>
          <div
            class="w-full bg-gray-800 rounded-lg shadow-xl overflow-hidden animate-fadeInUp delay-1"
          >
            <img
              src="/slow-cooked-beef.webp"
              alt="Beautifully presented local cuisine"
              class="w-full h-64 md:h-80 lg:h-96 object-cover"
            />
          </div>
        </div>
      </div>
    </section>

    <!-- Food & Drink Gallery Section -->
    <section id="gallery" class="py-20 bg-gray-800 md:py-32">
      <div class="container px-6 mx-auto">
        <h2 class="mb-16 text-4xl text-center md:text-5xl font-display gold-accent animate-fadeInUp">Our Food & Drink Gallery</h2>
        <GalleryGrid items={galleryItems} columns={{ mobile: 2, tablet: 3, desktop: 4 }} class="mx-auto max-w-[1440px]" />
      </div>
    </section>

    <!-- Image Modal -->
    <div id="imageModal" class="fixed inset-0 z-50 bg-black bg-opacity-90 flex items-center justify-center p-4 hidden">
      <div class="relative max-w-4xl max-h-full">
        <button id="closeModal" class="absolute -top-12 right-0 text-white text-4xl hover:text-gold-accent transition-colors">
          √ó
        </button>
        <img id="modalImage" src="" alt="" class="max-w-full max-h-full object-contain rounded-lg shadow-2xl" />
      </div>
    </div>


    <!-- Combined Menu & Dining Information Section -->
    <section id="menu" class="py-20 bg-black md:py-32">
      <div class="container px-6 mx-auto">
        <h2
          class="mb-16 text-4xl text-center md:text-5xl font-display gold-accent animate-fadeInUp"
        >
          Menu & Dining Information
        </h2>

        <div class="grid gap-12 lg:grid-cols-2">
          <!-- Left Column: Menu -->
          <div class="animate-fadeInUp delay-1">
            <h3 class="mb-8 text-3xl font-display gold-accent">Example Menu</h3>

            <!-- Menu Categories -->
            <div class="space-y-8 p-4 rounded-lg glassmorphic-card">
              <!-- Starters -->
              <div>
                <h4 class="pr-4 pl-4 mb-2 text-2xl font-display gold-accent">Starters</h4>
                <div class="">
                  <div class="pr-4 pl-4 pb-2">
                    <div class="flex justify-between">
                      <h5 class="text-lg font-semibold text-white">Potato & Watercress Soup</h5>
                      <span class="text-gold-accent font-semibold">¬£6</span>
                    </div>
                    <p class="text-gray-400 text-sm">A comforting classic soup made with fresh local ingredients</p>
                  </div>

                  <div class="pr-4 pl-4 pb-2">
                    <div class="flex justify-between">
                      <h5 class="text-lg font-semibold text-white">Wild Boar Terrine with Toast</h5>
                      <span class="text-gold-accent font-semibold">¬£7</span>
                    </div>
                    <p class="text-gray-400 text-sm">Served with toasted bread for a perfect starter</p>
                  </div>

                  <div class="pr-4 pl-4 pb-2">
                    <div class="flex justify-between">
                      <h5 class="text-lg font-semibold text-white">Smoked Mackerel Salad with Apple & Horseradish Cream</h5>
                      <span class="text-gold-accent font-semibold">¬£7</span>
                    </div>
                    <p class="text-gray-400 text-sm">Fresh salad with smoked fish and creamy horseradish</p>
                  </div>
                </div>
              </div>

              <!-- Main Courses -->
              <div>
                <h4 class="pr-4 pl-4 mb-2 text-2xl font-display gold-accent">Main Courses</h4>
                <div>
                  <div class="pr-4 pl-4 pb-2">
                    <div class="flex justify-between">
                      <h5 class="text-lg font-semibold text-white">10 Hour Slow Cooked Beef Short Rib (GF)</h5>
                      <span class="text-gold-accent font-semibold">¬£22</span>
                    </div>
                    <p class="text-gray-400 text-sm">Tender beef slow-cooked to perfection with Honey Glaze on a Celeriac Fondant</p>
                  </div>
                  <div class="pr-4 pl-4 pb-2">
                    <div class="flex justify-between">
                      <h5 class="text-lg font-semibold text-white">Pan Fried Pork Fillet with Sage &amp; Black Pepper Crumb (GFA)</h5>
                      <span class="text-gold-accent font-semibold">¬£18</span>
                    </div>
                    <p class="text-gray-400 text-sm">Served on a bed of mash with a white wine and mustard cream sauce</p>
                  </div>

                  <div class="pr-4 pl-4 pb-2">
                    <div class="flex justify-between">
                      <h5 class="text-lg font-semibold text-white">Pan Fried Chicken Breast </h5>
                      <span class="text-gold-accent font-semibold">¬£17</span>
                    </div>
                    <p class="text-gray-400 text-sm">Succulent chicken served with Creamy Mash & a Leek & Stilton Sauce</p>
                  </div>

                </div>
              </div>
              <div class="p-6 rounded-lg glassmorphic-card">
                <h4 class="mb-4 text-xl font-semibold text-white">Special Dietary Requirements</h4>
                <p class="text-gray-400">
                  We're happy to accommodate vegetarian, vegan, and gluten-free dietary requirements. Please let us know when booking so we can ensure our kitchen is prepared to create something special for you.
                </p>
              </div>
            </div>


          </div>

          <!-- Right Column: Hours and Reservations -->
          <div class="animate-fadeInUp delay-2">
            <!-- Opening Hours -->
            <h3 class="mb-8 text-3xl font-display gold-accent">Opening Times</h3>
            <div class="space-y-6">
              <div class="p-6 rounded-lg glassmorphic-card">
                <h4 class="mb-4 text-xl font-display gold-accent">Food Service Times:</h4>
                <ul class="space-y-2 text-gray-400">
                  <li class="flex justify-between">
                    <span>Monday:</span>
                    <span class="text-red-400">No food service</span>
                  </li>
                  <li class="flex justify-between">
                    <span>Tuesday - Wednesday:</span>
                    <span>5:00pm - 8:30pm</span>
                  </li>
                  <li class="flex justify-between">
                    <span>Thursday <span class="text-sm">(Ramsay's Fish & Chips van)</span>:</span>
                    <span>(6:30pm - 7:20pm)</span>
                  </li>
                  <li class="flex justify-between">
                    <span>Friday - Saturday:</span>
                    <span>12:00pm - 2:30pm & 5:00pm - 8:30pm</span>
                  </li>
                  <li class="flex justify-between">
                    <span>Sunday:</span>
                    <span>12:00pm - 4:00pm</span>
                  </li>
                </ul>
              </div>

              <div class="p-6 rounded-lg glassmorphic-card">
                <h4 class="mb-4 text-xl font-display gold-accent">Bar Hours:</h4>
                <ul class="space-y-2 text-gray-400">
                  <li class="flex justify-between">
                    <span>Monday - Thursday:</span>
                    <span>5:00pm - Late</span>
                  </li>
                  <li class="flex justify-between">
                    <span>Friday - Sunday:</span>
                    <span>12:00pm - Late</span>
                  </li>
                </ul>
              </div>
            </div>

            <div class="space-y-6">
              <div class="p-6 rounded-lg glassmorphic-card">
                <h4 class="mb-4 text-xl font-semibold text-white">Book Your Table</h4>
                <p class="mb-4 text-gray-400">
                  We recommend booking in advance, especially for weekend dining and Sunday lunch. Walk-ins are welcome subject to availability.
                </p>
                <div class="space-y-3">
                  <div class="flex items-center">
                    <span class="mr-3 gold-accent">üìû</span>
                    <a href="tel:01969640272" class="text-white hover:text-gold-accent transition-colors">
                      01969 640272
                    </a>
                  </div>
                  <div class="flex items-center">
                    <span class="mr-3 gold-accent">‚úâÔ∏è</span>
                    <a href="mailto:enquiries@forestersarmscoverdale.com" class="text-white hover:text-gold-accent transition-colors">
                      enquiries@forestersarmscoverdale.com
                    </a>
                  </div>
                </div>
              </div>


            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Call to Action Section -->
    <section class="py-20 bg-gray-900 md:py-32">
      <div class="container px-6 mx-auto text-center">
        <h2 class="mb-6 text-4xl font-display gold-accent animate-fadeInUp">
          Ready to Dine With Us?
        </h2>
        <p class="max-w-2xl mx-auto mb-8 text-xl text-gray-400 animate-fadeInUp delay-1">
          Experience the finest Yorkshire hospitality and cuisine in our historic setting. Book your table today or simply drop by for a drink at the bar.
        </p>
        <div class="flex flex-col sm:flex-row gap-4 justify-center animate-fadeInUp delay-2">
          <a
            href="tel:01969640272"
            class="px-8 py-3 text-lg font-semibold text-black transition-all duration-300 transform rounded-lg bg-gold-accent hover-gold-accent hover:scale-105 focus:outline-none focus:ring-2 focus:ring-amber-300 focus:ring-opacity-50"
          >
            Call to Book
          </a>
          <a
            href="mailto:enquiries@forestersarmscoverdale.com"
            class="px-8 py-3 text-lg font-semibold transition-all duration-300 transform rounded-lg border-2 border-gold-accent gold-accent hover:bg-gold-accent hover:text-black focus:outline-none focus:ring-2 focus:ring-amber-300 focus:ring-opacity-50"
          >
            Email Us
          </a>
        </div>
      </div>
    </section>
  </main>

  <Footer />

  <style>

    @media (min-width: 1080px) {
      section > .container {
        max-width: 80%;
        margin: 0 auto;
      }
    }
  </style>

  <script define:vars={{ galleryData: galleryDataForJS }}>
    document.addEventListener('DOMContentLoaded', function() {
      const modal = document.getElementById('imageModal');
      const modalImage = document.getElementById('modalImage');
      const closeModal = document.getElementById('closeModal');

      function openModal(imageSrc, alt) {
        modalImage.src = imageSrc;
        modalImage.alt = alt;
        modal.classList.remove('hidden');
        document.body.style.overflow = 'hidden';
      }

      function closeModalFunc() {
        modal.classList.add('hidden');
        document.body.style.overflow = 'auto';
      }

      closeModal.addEventListener('click', closeModalFunc);
      modal.addEventListener('click', (e) => {
        if (e.target === modal) closeModalFunc();
      });
      document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape' && !modal.classList.contains('hidden')) {
          closeModalFunc();
        }
      });

      // Setup gallery links
      const galleryLinks = document.querySelectorAll('a[href*="./gallery/"]');

      galleryLinks.forEach(link => {
        link.addEventListener('click', function(e) {
          e.preventDefault();

          const href = this.getAttribute('href');
          const slideMatch = href.match(/slide(\d+)/);

          if (slideMatch) {
            const slideId = `slide${slideMatch[1]}`;
            const item = galleryData.find(item => item.id === slideId);

            if (item) {
              const largeImageSrc = item.largeSrc;
              openModal(largeImageSrc, item.alt);
            }
          }
        });
      });
    });
  </script>
</Layout>