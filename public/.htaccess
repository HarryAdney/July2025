RewriteEngine On

# Force non-www
RewriteCond %{HTTP_HOST} ^www.forestersarmscoverdale.com [NC]
RewriteRule ^(.*)$ https://forestersarmscoverdale.com/$1 [L,R=301]

# Handle Astro's directory-based routing
# Serve index.html from subdirectories when accessing clean URLs
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} !(\.[a-zA-Z0-9]{1,5})$
RewriteRule ^([^/]+)/?$ /$1/index.html [L]

# Ensure trailing slash for directories (optional, for consistency)
RewriteCond %{REQUEST_FILENAME} -d
RewriteCond %{REQUEST_URI} !/$
RewriteRule ^(.*)$ /$1/ [R=301,L]